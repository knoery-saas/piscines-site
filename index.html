<!DOCTYPE html>
<html lang="fr" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Piscines du Rhin | Expert Pisciniste Bas-Rhin (67)</title>
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- AOS Animation Library -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    
    <!-- Google Fonts - Plus Jakarta Sans -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=Dancing+Script:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Font Awesome 6.4.0 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    
    <!-- EmailJS pour l'envoi d'emails -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: { 
                        navy: '#011627', 
                        accent: '#20E2D7',
                        orange: '#E69B3F'
                    },
                    fontFamily: { 
                        sans: ['"Plus Jakarta Sans"', 'sans-serif'] 
                    }
                }
            }
        }
    </script>

    <style>
        /* Glassmorphism Header */
        .premium-blur { 
            backdrop-filter: blur(15px); 
            -webkit-backdrop-filter: blur(15px);
            background: rgba(1, 22, 39, 0.95); 
        }
        
        /* 
         * LOGO DESCRIPTION (pour r√©f√©rence future / cr√©ation SVG minimaliste) :
         * - √âl√©ment graphique abstrait en haut : forme arrondie/ovale avec bandes de couleur
         *   * Bande orange (#E69B3F) en haut √† gauche et bas √† droite
         *   * Bande bleue (#20E2D7) au centre, avec contour bleu vif
         *   * Bande brune/gris fonc√© pour la profondeur
         * - Texte en dessous : "Piscines Les du Rhin" en script/cursive √©l√©gant
         *   * "Piscines" (ligne 1, plus grand)
         *   * "‚Äî Les ‚Äî" (ligne 2, plus petit, avec tirets)
         *   * "du Rhin" (ligne 3, taille moyenne)
         * - Couleurs principales : Orange #E69B3F, Bleu #20E2D7, Texte en script clair
         */
        
        /* Logo HTML/CSS - Structure verticale */
        .select-none {
            user-select: none;
        }
        
        /* Animation d'eau √©l√©gante et subtile au chargement */
        /* Animation de bulles qui montent */
        .bubbles-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 9999;
            pointer-events: none;
            overflow: hidden;
            animation: bubblesFadeOut 3s ease-out forwards;
        }
        
        .bubble {
            position: absolute;
            bottom: -50px;
            background: rgba(32, 226, 215, 0.3);
            border: 2px solid rgba(32, 226, 215, 0.5);
            border-radius: 50%;
            animation: bubbleRise linear infinite;
            box-shadow: 0 0 10px rgba(32, 226, 215, 0.4);
        }
        
        .bubble:nth-child(1) { left: 10%; width: 20px; height: 20px; animation-duration: 4s; animation-delay: 0s; }
        .bubble:nth-child(2) { left: 20%; width: 15px; height: 15px; animation-duration: 5s; animation-delay: 0.5s; }
        .bubble:nth-child(3) { left: 30%; width: 25px; height: 25px; animation-duration: 6s; animation-delay: 1s; }
        .bubble:nth-child(4) { left: 40%; width: 18px; height: 18px; animation-duration: 4.5s; animation-delay: 0.3s; }
        .bubble:nth-child(5) { left: 50%; width: 22px; height: 22px; animation-duration: 5.5s; animation-delay: 0.8s; }
        .bubble:nth-child(6) { left: 60%; width: 16px; height: 16px; animation-duration: 4.8s; animation-delay: 0.2s; }
        .bubble:nth-child(7) { left: 70%; width: 24px; height: 24px; animation-duration: 6.2s; animation-delay: 1.2s; }
        .bubble:nth-child(8) { left: 80%; width: 19px; height: 19px; animation-duration: 5.2s; animation-delay: 0.6s; }
        .bubble:nth-child(9) { left: 90%; width: 21px; height: 21px; animation-duration: 4.7s; animation-delay: 0.4s; }
        .bubble:nth-child(10) { left: 15%; width: 17px; height: 17px; animation-duration: 5.8s; animation-delay: 0.9s; }
        .bubble:nth-child(11) { left: 35%; width: 23px; height: 23px; animation-duration: 6.5s; animation-delay: 1.1s; }
        .bubble:nth-child(12) { left: 55%; width: 14px; height: 14px; animation-duration: 4.3s; animation-delay: 0.1s; }
        
        @keyframes bubbleRise {
            0% {
                bottom: -50px;
                opacity: 0;
                transform: translateX(0) scale(0.8);
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 0.8;
            }
            100% {
                bottom: 110%;
                opacity: 0;
                transform: translateX(20px) scale(1.2);
            }
        }
        
        @keyframes bubblesFadeOut {
            0% {
                opacity: 1;
            }
            80% {
                opacity: 1;
            }
            100% {
                opacity: 0;
                visibility: hidden;
            }
        }
        
        /* Animation de confettis pour la soumission du formulaire */
        .confetti-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 10000;
            pointer-events: none;
            overflow: hidden;
        }
        
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background: #E69B3F;
            animation: confettiFall 3s ease-out forwards;
        }
        
        .confetti.blue {
            background: #2D9CDB;
        }
        
        .confetti.turquoise {
            background: #20E2D7;
        }
        
        @keyframes confettiFall {
            0% {
                top: -10px;
                opacity: 1;
                transform: rotate(0deg) translateX(0);
            }
            100% {
                top: 110%;
                opacity: 0;
                transform: rotate(720deg) translateX(100px);
            }
        }
        
        /* Hero Overlay */
        .hero-overlay { 
            background: radial-gradient(circle at center, rgba(1, 22, 39, 0.4) 0%, rgba(1, 22, 39, 1) 100%); 
            z-index: 0; 
        }
        
        /* Image Parallaxe - Se d√©place avec la souris */
        .parallax-image {
            transition: transform 0.1s ease-out;
            will-change: transform;
        }
        
        /* Form Inputs - VISIBILIT√â OPTIMIS√âE */
        .input-premium { 
            background: rgba(255, 255, 255, 0.1) !important; 
            border: 2px solid rgba(255, 255, 255, 0.2) !important; 
            color: #ffffff !important; 
            transition: all 0.3s ease; 
            width: 100%; 
        }
        .input-premium::placeholder {
            color: rgba(255, 255, 255, 0.6) !important;
        }
        .input-premium:focus { 
            border-color: #E69B3F !important; 
            outline: none; 
            background: rgba(255, 255, 255, 0.15) !important; 
            box-shadow: 0 0 0 3px rgba(230, 155, 63, 0.2);
        }
        
        /* Formulaire Container - FOND PLUS OPAQUE */
        .form-container {
            background: rgba(1, 22, 39, 0.98) !important;
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
        }
        
        
        /* Barre de progression multi-√©tapes */
        .progress-bar {
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            overflow: hidden;
            margin-bottom: 1.5rem;
        }
        .progress-fill {
            height: 100%;
            background: #E69B3F;
            transition: width 0.5s ease;
            border-radius: 2px;
        }
        
        /* √âtapes du formulaire */
        .form-step {
            display: none;
            animation: fadeIn 0.4s ease-in;
        }
        .form-step.active {
            display: block;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Bouton Pulsant - Animation CTA */
        .btn-pulse {
            animation: pulseCTA 2s ease-in-out infinite;
        }
        @keyframes pulseCTA {
            0%, 100% {
                box-shadow: 0 0 0 0 rgba(32, 226, 215, 0.7);
            }
            50% {
                box-shadow: 0 0 0 10px rgba(32, 226, 215, 0);
            }
        }
        
        /* Compteur anim√© - Orange du logo (#E69B3F) */
        .counter-number {
            font-size: 3rem;
            font-weight: 800;
            color: #E69B3F;
        }
        
        /* Chatbot Styles */
        #chat-window { 
            display: none; 
            flex-direction: column; 
            position: fixed;
            bottom: 100px; 
            right: 25px; 
            width: 350px; 
            max-width: calc(100vw - 50px);
            height: 480px; 
            max-height: calc(100vh - 200px);
            background: #011627; 
            border: 1px solid rgba(32, 226, 215, 0.4); 
            border-radius: 25px; 
            box-shadow: 0 25px 50px rgba(0,0,0,0.5); 
            z-index: 1000; 
            overflow: hidden;
            animation: slideInChat 0.3s ease-out;
        }
        
        /* Responsive Chatbot - Mobile */
        @media (max-width: 768px) {
            #chat-window {
                bottom: 90px;
                right: 10px;
                left: 10px;
                width: auto;
                height: 400px;
                max-height: calc(100vh - 180px);
            }
            
            /* S'assurer que le bouton chat ne cache pas le formulaire sur mobile */
            .chat-trigger-btn {
                bottom: 20px !important;
                right: 20px !important;
                width: 56px;
                height: 56px;
            }
            
            /* S'assurer que le formulaire reste accessible */
            #devis {
                margin-bottom: 80px;
            }
        }
        
        @keyframes slideInChat {
            from {
                transform: translateY(20px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        
        /* Notification visuelle pour l'ouverture automatique du chat */
        .chat-notification {
            position: fixed;
            bottom: 100px;
            right: 25px;
            background: linear-gradient(135deg, rgba(230, 155, 63, 0.98), rgba(32, 226, 215, 0.98));
            color: #011627;
            padding: 10px 16px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: bold;
            z-index: 2001;
            box-shadow: 0 8px 25px rgba(230, 155, 63, 0.5);
            animation: bounceIn 0.5s ease-out;
            border: 2px solid rgba(230, 155, 63, 0.4);
            max-width: 200px;
            backdrop-filter: blur(10px);
        }
        
        @keyframes bounceIn {
            0% {
                transform: scale(0.8);
                opacity: 0;
            }
            50% {
                transform: scale(1.1);
            }
            100% {
                transform: scale(1);
                opacity: 1;
            }
        }
        
        /* Messages Styles */
        .msg { 
            padding: 12px 16px; 
            border-radius: 15px; 
            max-width: 85%; 
            font-size: 13px; 
            margin-bottom: 10px; 
            line-height: 1.4; 
            animation: fadeInChat 0.4s ease-out forwards;
            opacity: 0;
            transform: translateY(10px);
        }
        .msg-ai { 
            background-color: #e0f7f5 !important;
            color: #1e293b !important; 
            border-bottom-left-radius: 2px; 
        }
        .msg-user { 
            background: #011627; 
            color: #ffffff; 
            align-self: flex-end; 
            border-bottom-right-radius: 2px; 
            font-weight: bold; 
        }
        
        /* Social Proof (FOMO) */
        .social-proof { 
            animation: slideIn 0.5s ease-out; 
            position: fixed; 
            top: 100px; 
            right: 25px; 
            z-index: 2000; 
            pointer-events: none; 
        }
        @keyframes slideIn { 
            from { transform: translateX(100%); opacity: 0; } 
            to { transform: translateX(0); opacity: 1; } 
        }

        @keyframes fadeInChat {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Typing Dots Animation */
        .typing-dots {
            display: inline-flex;
            gap: 4px;
            align-items: center;
        }
        .typing-dots span {
            width: 6px;
            height: 6px;
            background: #E69B3F;
            border-radius: 50%;
            animation: typingDot 1.4s infinite;
        }
        .typing-dots span:nth-child(2) { animation-delay: 0.2s; }
        .typing-dots span:nth-child(3) { animation-delay: 0.4s; }

        @keyframes typingDot {
            0%, 80%, 100% { 
                transform: scale(0);
                opacity: 0.5;
            }
            40% { 
                transform: scale(1);
                opacity: 1;
            }
        }

        /* Styles pour les messages d'erreur */
        .error-message {
            color: #ef4444;
            font-size: 11px;
            font-weight: bold;
            margin-top: 4px;
            margin-left: 4px;
            display: flex;
            align-items: center;
            gap: 6px;
            animation: shake 0.3s ease-in-out;
        }
        
        .error-message i {
            font-size: 10px;
        }
        
        .input-premium.error {
            border: 2px solid #ef4444 !important;
            background: rgba(239, 68, 68, 0.1) !important;
            animation: shake 0.3s ease-in-out;
        }
        
        .input-premium.error:focus {
            border-color: #ef4444 !important;
            box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.2) !important;
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        
        /* Button Hover Effects (CRO Optimized) - Avec touches Orange */
        .btn-premium {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .btn-premium:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(230, 155, 63, 0.4), 0 0 20px rgba(230, 155, 63, 0.2);
        }
        .btn-submit:hover {
            background: #E69B3F !important;
            box-shadow: 0 10px 30px rgba(230, 155, 63, 0.4), 0 0 20px rgba(230, 155, 63, 0.3);
        }
        .btn-premium:active {
            transform: translateY(0);
        }
        
        /* Ic√¥nes avec touches Orange */
        .icon-orange {
            color: #E69B3F;
        }
        
        /* Bordures actives avec Orange */
        .border-active-orange {
            border-color: #E69B3F;
        }
        
        /* Am√©lioration visibilit√© texte formulaire */
        select.input-premium {
            color: #ffffff !important;
        }
        select.input-premium option {
            background: #011627;
            color: #ffffff;
        }
    </style>
</head>
<body class="bg-[#010B13] font-sans text-white antialiased" style="font-family: 'Plus Jakarta Sans', sans-serif;">
            <!-- Animation de bulles qui montent au chargement -->
            <div class="bubbles-animation">
                <div class="bubble"></div>
                <div class="bubble"></div>
                <div class="bubble"></div>
                <div class="bubble"></div>
                <div class="bubble"></div>
                <div class="bubble"></div>
                <div class="bubble"></div>
                <div class="bubble"></div>
                <div class="bubble"></div>
                <div class="bubble"></div>
                <div class="bubble"></div>
                <div class="bubble"></div>
            </div>

    <!-- Header -->
    <header class="fixed w-full z-[100] py-4 px-6 lg:px-10 border-b border-white/5 premium-blur">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <div class="flex items-center gap-3">
                <!-- Logo HTML/CSS selon structure verticale originale avec animation subtile -->
                <div class="flex items-center gap-3 select-none hover:opacity-90 transition-opacity duration-300">
                    <div class="flex flex-col gap-1.5 transform -rotate-12 hover:rotate-[-10deg] transition-transform duration-300">
                        <div class="h-1.5 w-10 bg-[#E69B3F] rounded-full"></div>
                        <div class="h-1.5 w-10 bg-[#2D9CDB] rounded-full"></div>
                        <div class="h-1.5 w-10 bg-[#E69B3F] rounded-full"></div>
                    </div>

                    <div class="flex flex-col items-center">
                        <span style="font-family: sans-serif; letter-spacing: 1px;" class="text-white font-black text-2xl leading-none uppercase">Piscines</span>
                        
                        <div class="flex items-center w-full my-0.5">
                            <div class="h-[1px] flex-grow bg-white/40"></div>
                            <span style="font-family: 'Brush Script MT', cursive;" class="text-[#E69B3F] text-xl px-2">Les</span>
                            <div class="h-[1px] flex-grow bg-white/40"></div>
                        </div>
                        
                        <span style="font-family: sans-serif; letter-spacing: 2px;" class="text-[#E69B3F] font-black text-2xl leading-none uppercase">du Rhin</span>
                    </div>
                </div>
                <span class="text-[10px] font-bold text-orange uppercase tracking-[0.2em] hidden sm:inline-block ml-2">Bas-Rhin (67)</span>
            </div>
            <div class="bg-white/5 px-4 py-2 rounded-lg text-[10px] font-black text-white uppercase tracking-widest hover:bg-white/10 hover:border-orange/30 border border-transparent transition-all duration-300">
                R√©ponse rapide <i class="fas fa-bolt text-orange animate-pulse"></i>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="relative min-h-screen flex items-center pt-32 md:pt-24 pb-12 overflow-hidden" id="hero-section">
        <div class="absolute inset-0 z-0">
            <img id="hero-image" src="assets/55337074-5a47-4443-8482-8d0269fe66c1-a25f61dc-d360-4d30-8ab6-ef2d193b24e8.png" 
                 onerror="this.src='https://images.unsplash.com/photo-1576013551627-0cc20b96c2a7?auto=format&fit=crop&q=80&w=2000'" 
                 class="w-full h-full object-cover opacity-30 parallax-image" alt="Piscine Bas-Rhin">
            <div class="absolute inset-0 hero-overlay"></div>
        </div>

        <!-- Conteneur Social Proof (FOMO) -->
        <div id="notif-container"></div>

        <div class="container mx-auto px-6 relative z-10 grid lg:grid-cols-2 gap-12 items-center">
            
            <div data-aos="fade-right">
                <div class="inline-flex items-center gap-2 px-4 py-1.5 bg-orange/10 border border-orange/30 rounded-full mb-8 backdrop-blur-md hover:bg-orange/15 hover:border-orange/50 transition-all duration-300 shadow-lg shadow-orange/20">
                    <span class="w-2.5 h-2.5 bg-orange rounded-full animate-ping"></span>
                    <span class="w-2.5 h-2.5 bg-orange rounded-full absolute animate-pulse"></span>
                    <span class="text-xs font-black uppercase tracking-widest text-white">VOTRE EXPERT PISCINE DANS LE BAS-RHIN (67)</span>
                </div>
                
                <h2 class="text-5xl md:text-7xl lg:text-8xl font-black mb-6 leading-[0.95] tracking-tighter text-white">
                    Votre devis <br><span class="text-orange italic">sous 48h.</span>
                </h2>
                <p class="text-xl text-gray-300 mb-6 max-w-lg font-medium border-l-4 border-orange pl-6">
                    Nouvelle piscine, R√©novation, Entretien et SAV. Obtenez un chiffrage pr√©cis et sans engagement pour votre piscine dans le Bas-Rhin (67).
                </p>
                
                <!-- Points marketing √©l√©gants avec animations -->
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 max-w-2xl mb-10" data-aos="fade-up" data-aos-delay="200">
                    <div class="flex flex-col items-center text-center p-4 bg-white/5 rounded-xl border border-white/10 hover:border-orange/50 hover:bg-white/10 hover:scale-105 transition-all duration-300 group cursor-pointer">
                        <div class="w-12 h-12 bg-orange/20 rounded-full flex items-center justify-center mb-3 group-hover:bg-orange/30 group-hover:scale-110 transition-all duration-300">
                            <i class="fas fa-tools text-orange text-xl group-hover:rotate-12 transition-transform duration-300"></i>
                        </div>
                        <span class="text-[10px] font-black text-white uppercase tracking-tight leading-tight group-hover:text-orange transition-colors" style="font-family: 'Plus Jakarta Sans', sans-serif;">SAV</span>
                        <span class="text-[10px] text-gray-400 mt-1 group-hover:text-gray-300 transition-colors" style="font-family: 'Plus Jakarta Sans', sans-serif;">D√©pannage</span>
                    </div>
                    <div class="flex flex-col items-center text-center p-4 bg-white/5 rounded-xl border border-white/10 hover:border-orange/50 hover:bg-white/10 hover:scale-105 transition-all duration-300 group cursor-pointer">
                        <div class="w-12 h-12 bg-orange/20 rounded-full flex items-center justify-center mb-3 group-hover:bg-orange/30 group-hover:scale-110 transition-all duration-300">
                            <i class="fas fa-swimming-pool text-orange text-base group-hover:scale-110 transition-transform duration-300"></i>
                        </div>
                        <span class="text-[10px] font-black text-white uppercase tracking-tight leading-tight group-hover:text-orange transition-colors" style="font-family: 'Plus Jakarta Sans', sans-serif;">Construction</span>
                        <span class="text-[10px] text-gray-400 mt-1 group-hover:text-gray-300 transition-colors" style="font-family: 'Plus Jakarta Sans', sans-serif;">B√©ton</span>
                    </div>
                    <div class="flex flex-col items-center text-center p-4 bg-white/5 rounded-xl border border-white/10 hover:border-orange/50 hover:bg-white/10 hover:scale-105 transition-all duration-300 group cursor-pointer">
                        <div class="w-12 h-12 bg-orange/20 rounded-full flex items-center justify-center mb-3 group-hover:bg-orange/30 group-hover:scale-110 transition-all duration-300">
                            <i class="fas fa-sync-alt text-orange text-xl group-hover:rotate-180 transition-transform duration-500"></i>
                        </div>
                        <span class="text-[10px] font-black text-white uppercase tracking-tight leading-tight group-hover:text-orange transition-colors" style="font-family: 'Plus Jakarta Sans', sans-serif;">R√©novation</span>
                        <span class="text-[10px] text-gray-400 mt-1 group-hover:text-gray-300 transition-colors" style="font-family: 'Plus Jakarta Sans', sans-serif;">Modernisation</span>
                    </div>
                    <div class="flex flex-col items-center text-center p-4 bg-white/5 rounded-xl border border-white/10 hover:border-orange/50 hover:bg-white/10 hover:scale-105 transition-all duration-300 group cursor-pointer">
                        <div class="w-12 h-12 bg-orange/20 rounded-full flex items-center justify-center mb-3 group-hover:bg-orange/30 group-hover:scale-110 transition-all duration-300">
                            <i class="fas fa-water text-orange text-xl group-hover:animate-pulse transition-all duration-300"></i>
                        </div>
                        <span class="text-[10px] font-black text-white uppercase tracking-tight leading-tight group-hover:text-orange transition-colors" style="font-family: 'Plus Jakarta Sans', sans-serif;">Entretien</span>
                        <span class="text-[10px] text-gray-400 mt-1 group-hover:text-gray-300 transition-colors" style="font-family: 'Plus Jakarta Sans', sans-serif;">Maintenance</span>
                    </div>
                </div>
            </div>

            <!-- Colonne Formulaire (Logique M√©tier + Technique) - VISIBILIT√â OPTIMIS√âE -->
            <div id="devis" class="form-container border-2 border-white/20 p-8 lg:p-10 rounded-[2.5rem] shadow-2xl relative z-20">
                <div class="text-center mb-8">
                    <h3 class="text-3xl font-black uppercase tracking-tighter text-white">Lancer ma demande</h3>
                    <p class="text-orange text-[10px] font-bold uppercase tracking-widest mt-1">R√©ponse pr√©cise garantie sous 48h.</p>
                </div>

                <!-- Barre de progression multi-√©tapes -->
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill" style="width: 33.33%"></div>
                </div>
                <div class="flex justify-center gap-2 mb-6">
                    <div class="flex items-center gap-2">
                        <div class="w-8 h-8 rounded-full bg-orange text-navy font-black text-xs flex items-center justify-center" id="step-indicator-1">1</div>
                        <span class="text-[10px] font-bold text-gray-300">Projet</span>
                    </div>
                    <div class="w-12 h-0.5 bg-gray-600"></div>
                    <div class="flex items-center gap-2">
                        <div class="w-8 h-8 rounded-full bg-gray-600 text-white font-black text-xs flex items-center justify-center" id="step-indicator-2">2</div>
                        <span class="text-[10px] font-bold text-gray-400">D√©tails</span>
                    </div>
                    <div class="w-12 h-0.5 bg-gray-600"></div>
                    <div class="flex items-center gap-2">
                        <div class="w-8 h-8 rounded-full bg-gray-600 text-white font-black text-xs flex items-center justify-center" id="step-indicator-3">3</div>
                        <span class="text-[10px] font-bold text-gray-400">Contact</span>
                    </div>
                </div>

                <form id="devis-form" class="space-y-4" onsubmit="event.preventDefault(); validateAndSubmit();">
                    
                    <!-- √âTAPE 1 : Choix du projet -->
                    <div class="form-step active" id="step-1">
                        <div class="space-y-2 mb-4">
                            <label class="text-[10px] font-black text-gray-300 uppercase tracking-widest ml-2">Quel est votre projet ?</label>
                            <select id="project-type" name="project_type" onchange="updateFormLogic()" class="input-premium w-full p-4 rounded-xl text-xs font-black uppercase cursor-pointer transition-colors" required>
                                <option value="construction" style="background: #011627; color: #ffffff;">B√âTON</option>
                                <option value="renovation" style="background: #011627; color: #ffffff;">R√âNOVATION</option>
                                <option value="entretien" style="background: #011627; color: #ffffff;">ENTRETIEN / SAV</option>
                            </select>
                        </div>

                        <div id="tech-fields" class="grid grid-cols-1 gap-4 mb-4">
                            <div id="dims-field" class="space-y-2">
                                <label class="text-[10px] font-bold text-gray-300 uppercase ml-2">Dimensions souhait√©es (ex: 8x4m)</label>
                                <input type="text" id="dims-input" name="dimensions" placeholder="TAILLE BASSIN" class="input-premium w-full p-4 rounded-xl text-xs font-bold uppercase">
                            </div>
                        </div>

                        <button type="button" onclick="nextStep(2)" class="w-full bg-orange text-white py-4 rounded-2xl font-black text-xs uppercase tracking-widest btn-premium shadow-xl shadow-orange/30 hover:bg-orange/90 hover:text-white transition-all mt-6">
                            Suivant <i class="fas fa-arrow-right ml-2"></i>
                        </button>
                    </div>

                    <!-- √âTAPE 2 : D√©tails techniques -->
                    <div class="form-step" id="step-2">
                        <div class="space-y-4">
                            <textarea id="dynamic-message" name="message_detail" placeholder="Dites-nous en plus sur votre projet..." rows="4" class="input-premium w-full p-4 rounded-xl text-xs font-bold uppercase resize-none placeholder:text-gray-400"></textarea>

                            <div class="flex items-center gap-4 bg-white/5 p-4 rounded-xl border border-white/10 hover:border-orange transition-all">
                                <i class="fas fa-camera text-xl" style="color: #E69B3F;"></i>
                                <div class="flex-grow">
                                    <label class="block text-[9px] font-black text-gray-300 uppercase mb-1">Ajouter une photo (Terrain ou Plan)</label>
                                    <input type="file" id="file-upload" class="block w-full text-[10px] text-gray-400 file:mr-4 file:py-2 file:px-3 file:rounded-full file:border-0 file:text-[9px] file:font-bold file:bg-white file:text-navy cursor-pointer">
                                </div>
                            </div>
                        </div>

                        <div class="flex gap-4 mt-6">
                            <button type="button" onclick="prevStep(1)" class="flex-1 bg-white/5 text-white py-4 rounded-2xl font-black text-xs uppercase tracking-widest btn-premium border border-white/10 hover:bg-white/10">
                                <i class="fas fa-arrow-left mr-2"></i> Retour
                            </button>
                            <button type="button" onclick="nextStep(3)" class="flex-1 bg-orange text-white py-4 rounded-2xl font-black text-xs uppercase tracking-widest btn-premium shadow-xl shadow-orange/30 hover:bg-orange/90 hover:text-white transition-all">
                                Suivant <i class="fas fa-arrow-right ml-2"></i>
                            </button>
                        </div>
                    </div>

                    <!-- √âTAPE 3 : Coordonn√©es et envoi -->
                    <div class="form-step" id="step-3">
                        <div class="space-y-4">
                            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                                <input type="text" id="nom-complet" name="nom" placeholder="NOM COMPLET" required class="input-premium w-full p-4 rounded-xl text-xs font-bold uppercase">
                                <input type="text" id="ville" name="ville" placeholder="Ville ou Code Postal (ex: 67500)" required class="input-premium w-full p-4 rounded-xl text-xs font-bold uppercase">
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <input type="email" id="email" name="email" placeholder="VOTRE ADRESSE E-MAIL" required class="input-premium w-full p-4 rounded-xl text-xs font-bold uppercase">
                                <input type="tel" id="telephone" name="telephone" placeholder="T√âL√âPHONE (FACULTATIF)" class="input-premium w-full p-4 rounded-xl text-xs font-bold uppercase">
                            </div>
                            
                            <!-- Champs cach√©s pour FormSubmit -->
                            <input type="hidden" name="project_type" id="hidden-project-type">
                            <input type="hidden" name="dimensions" id="hidden-dimensions">
                            <input type="hidden" name="message" id="hidden-message">

                            <div class="flex items-center justify-center gap-2 text-[9px] text-gray-300">
                                <i class="fas fa-shield-alt text-orange"></i>
                                <span>Donn√©es s√©curis√©es et confidentielles</span>
                            </div>
                        </div>

                        <div class="flex gap-4 mt-6">
                            <button type="button" onclick="prevStep(2)" class="flex-1 bg-white/5 text-white py-4 rounded-2xl font-black text-xs uppercase tracking-widest btn-premium border border-white/10 hover:bg-white/10">
                                <i class="fas fa-arrow-left mr-2"></i> Retour
                            </button>
                            <button type="submit" class="flex-1 bg-orange text-white py-4 rounded-2xl font-black text-sm uppercase tracking-widest btn-premium btn-submit btn-pulse shadow-xl shadow-orange/40 hover:bg-orange/90 hover:text-white transition-all">
                                Envoyer ma demande
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </section>

    <!-- Section Compteurs de Succ√®s (Stats) -->
    <section class="py-16 bg-[#020D17] border-t border-white/5" id="stats-section">
        <div class="container mx-auto px-6">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <!-- Compteur 1 -->
                <div class="text-center" data-aos="fade-up">
                    <div class="counter-number mb-2" id="counter-1" data-target="21">0</div>
                    <p class="text-sm font-bold text-gray-300 uppercase tracking-widest">21 ans d'exp√©rience</p>
                </div>
                <!-- Compteur 2 -->
                <div class="text-center" data-aos="fade-up" data-aos-delay="100">
                    <div class="counter-number mb-2" id="counter-2" data-target="850">0</div>
                    <p class="text-sm font-bold text-gray-300 uppercase tracking-widest">Piscines install√©es</p>
                </div>
                <!-- Compteur 3 -->
                <div class="text-center" data-aos="fade-up" data-aos-delay="200">
                    <div class="counter-number mb-2" id="counter-3" data-target="48" style="color: #E69B3F; white-space: nowrap;">48H</div>
                    <p class="text-sm font-bold text-gray-300 uppercase tracking-widest">Temps de r√©ponse moyen</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Section R√©alisations -->
    <section class="py-24 bg-[#020D17] border-t border-white/5">
        <div class="container mx-auto px-6">
            <h3 class="text-center text-4xl font-black uppercase tracking-widest mb-16 text-white">
                Nos projets <span class="text-orange italic">R√©alis√©s.</span>
            </h3>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <!-- Projet 1 - Strasbourg -->
                <a href="https://www.lespiscinesdurhin.com/galerie/nos-realisations-3/" target="_blank" rel="noopener noreferrer" class="group relative aspect-[4/3] rounded-[2rem] overflow-hidden border border-white/5 hover:border-orange/50 transition-all block cursor-pointer" data-aos="fade-up">
                    <div class="relative w-full h-full overflow-hidden">
                        <img src="assets/55337074-5a47-4443-8482-8d0269fe66c1-7a973488-86d5-46e3-af6a-08d191b0fbcb.png" 
                             onerror="this.src='assets/55337074-5a47-4443-8482-8d0269fe66c1-a25f61dc-d360-4d30-8ab6-ef2d193b24e8.png'"
                             class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-700" alt="Piscine moderne avec terrasse">
                    </div>
                    <div class="absolute inset-0 bg-gradient-to-t from-navy to-transparent pointer-events-none"></div>
                    <div class="absolute bottom-6 left-6 z-10 pointer-events-none">
                        <p class="text-xs font-black text-orange uppercase mb-1">Strasbourg</p>
                        <p class="text-lg font-black text-white">Piscine sur mesure</p>
                    </div>
                </a>
                <!-- Projet 2 - Haguenau -->
                <a href="https://www.lespiscinesdurhin.com/galerie/nos-realisations-3/" target="_blank" rel="noopener noreferrer" class="group relative aspect-[4/3] rounded-[2rem] overflow-hidden border border-white/5 hover:border-orange/50 transition-all block cursor-pointer" data-aos="fade-up" data-aos-delay="100">
                    <div class="relative w-full h-full overflow-hidden">
                        <img src="assets/6c5189f8-947a-4149-bcd3-767820712a0d-5d9b63e8-b1f4-4c9c-b6c1-93352005551f.png" 
                             onerror="this.src='assets/c6bab003-6c17-4cf0-a85f-c2e05df9f677-25021f3a-3e43-48d1-971e-0fbe30968b3e.png'"
                             class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-700" alt="Piscine r√©nov√©e">
                    </div>
                    <div class="absolute inset-0 bg-gradient-to-t from-navy to-transparent pointer-events-none"></div>
                    <div class="absolute bottom-6 left-6 z-10 pointer-events-none">
                        <p class="text-xs font-black text-orange uppercase mb-1">Haguenau</p>
                        <p class="text-lg font-black text-white">R√©novation</p>
                    </div>
                </a>
                <!-- Projet 3 - Saverne -->
                <a href="https://www.lespiscinesdurhin.com/galerie/nos-realisations-3/" target="_blank" rel="noopener noreferrer" class="group relative aspect-[4/3] rounded-[2rem] overflow-hidden border border-white/5 hover:border-orange/50 transition-all block cursor-pointer" data-aos="fade-up" data-aos-delay="200">
                    <div class="relative w-full h-full overflow-hidden">
                        <img src="assets/2bdba317-2436-477c-8794-c0a046a09dff_2-6b51be6d-5fa7-4374-8a43-6e8885ea58c4.png" 
                             onerror="this.src='assets/2bdba317-2436-477c-8794-c0a046a09dff-d82e6935-3103-4cc9-aaf2-859e29d3df31.png'"
                             class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-700" alt="Piscine avec jardin">
                    </div>
                    <div class="absolute inset-0 bg-gradient-to-t from-navy to-transparent pointer-events-none"></div>
                    <div class="absolute bottom-6 left-6 z-10 pointer-events-none">
                        <p class="text-xs font-black text-orange uppercase mb-1">Saverne</p>
                        <p class="text-lg font-black text-white">Piscine sur mesure</p>
                    </div>
                </a>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-navy py-16 border-t border-white/5 text-center relative overflow-hidden">
        <!-- Texture Fond -->
        <div class="absolute top-0 left-0 w-full h-full bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-5"></div>
        
        <div class="container mx-auto px-6 relative z-10">
            <div class="flex flex-col items-center gap-6 mb-6">
                <div class="flex items-center gap-3">
                    <div class="bg-orange/20 p-3 rounded-lg">
                        <i class="fas fa-water text-orange text-xl"></i>
                    </div>
                    <span class="font-black text-2xl tracking-tight uppercase text-white">Piscines du Rhin</span>
                </div>
                <p class="text-gray-400 text-sm font-medium mb-4">Bureau technique</p>
            </div>
            
            <div class="flex flex-col md:flex-row justify-center items-center gap-4 md:gap-8 text-xs font-bold text-gray-300 uppercase tracking-widest mb-8">
                <a href="https://www.google.com/maps/search/?api=1&query=Piscines+du+Rhin+Bas-Rhin" target="_blank" rel="noopener noreferrer" class="flex items-center gap-2 text-white hover:text-orange transition-colors cursor-pointer">
                    <i class="fas fa-map-marker-alt text-orange"></i>
                    <span class="font-black">Bas-Rhin (67)</span>
                </a>
                <p class="flex items-center gap-2">
                    <i class="fas fa-id-card text-orange"></i>
                    Siret : 505 111 864
                </p>
                <p class="flex items-center gap-2">
                    <i class="fas fa-shield-alt text-orange"></i>
                    Garantie D√©cennale
                </p>
            </div>
            
            <div class="h-px w-full bg-white/10 mb-4"></div>
            <p class="text-[10px] text-gray-500 uppercase tracking-widest">
                &copy; 2023 Piscines du Rhin. Tous droits r√©serv√©s.
            </p>
        </div>
    </footer>

    <!-- Chatbot Widget -->
    <div class="fixed bottom-10 right-10 z-[1000] md:bottom-10 md:right-10">
        <!-- Fen√™tre Chat -->
        <div id="chat-window" class="flex flex-col z-[1001] w-[360px] h-[480px] bg-white rounded-[30px] shadow-2xl border border-white/10 backdrop-blur-xl overflow-hidden">
            <!-- Header Chat -->
            <div class="bg-orange p-4 flex justify-between items-center">
                <div class="flex items-center gap-2">
                    <div class="w-2 h-2 bg-navy rounded-full animate-pulse"></div>
                    <span class="text-[10px] font-black uppercase text-navy tracking-widest">Assistant</span>
                </div>
                <button id="close-chat" class="text-navy hover:text-white transition-colors"><i class="fas fa-times"></i></button>
            </div>
            <!-- Zone Messages -->
            <div id="chat-msgs" class="flex-grow p-4 overflow-y-auto flex flex-col bg-gray-50">
                <div class="msg msg-ai" id="welcome-message" style="display: none; opacity: 1;">
                    Bonjour ! üëã Besoin d'un conseil pour votre piscine dans le Bas-Rhin ? Je suis l√† pour vous !
                </div>
            </div>
            <!-- Footer Chat -->
            <div class="p-4 bg-navy border-t border-white/10 flex gap-2">
                <input type="text" id="chat-input" placeholder="√âcrivez ici..." class="flex-grow bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-xs focus:outline-none focus:border-orange text-white" onkeypress="handleChatKeyPress(event)">
                <button onclick="sendMsg()" class="bg-orange text-white w-12 h-12 rounded-lg flex items-center justify-center transition-transform hover:scale-105 btn-premium">
                    <i class="fas fa-paper-plane text-sm"></i>
                </button>
            </div>
        </div>

        <!-- Bouton Trigger -->
        <button onclick="toggleChat()" class="fixed bottom-10 right-10 md:bottom-10 md:right-10 w-16 h-16 bg-orange rounded-[30px] flex items-center justify-center shadow-2xl z-[1001] hover:scale-110 transition-transform border-2 border-white/20 btn-premium chat-trigger-btn relative">
            <i class="fas fa-comment-alt text-navy text-2xl"></i>
            <!-- Badge notification rouge -->
            <span id="chat-notification-badge" class="absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center text-white text-[10px] font-black shadow-lg animate-pulse hidden">
                <span class="w-2 h-2 bg-white rounded-full"></span>
            </span>
        </button>
    </div>

    <!-- Scripts -->
    <script>
        // ============================================
        // INITIALISATION AOS (Animations au scroll)
        // ============================================
        if (typeof AOS !== 'undefined') {
            AOS.init({ 
                once: true, 
                duration: 1000,
                offset: 50
            });
        }

        // ============================================
        // 1. EFFET PARALLAXE SUR L'IMAGE DU HERO
        // L'image se d√©place l√©g√®rement selon la position de la souris
        // ============================================
        const heroImage = document.getElementById('hero-image');
        const heroSection = document.getElementById('hero-section');
        
        if (heroSection && heroImage) {
            heroSection.addEventListener('mousemove', (e) => {
                // Calculer la position de la souris relative √† la section
                const rect = heroSection.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                
                // Calculer le pourcentage de position (0 √† 100%)
                const xPercent = (x / rect.width) * 100;
                const yPercent = (y / rect.height) * 100;
                
                // Appliquer un d√©placement subtil (max 2% dans chaque direction)
                const moveX = (xPercent - 50) * 0.02;
                const moveY = (yPercent - 50) * 0.02;
                
                heroImage.style.transform = `translate(${moveX}%, ${moveY}%) scale(1.05)`;
            });
            
            // R√©initialiser la position quand la souris quitte la section
            heroSection.addEventListener('mouseleave', () => {
                heroImage.style.transform = 'translate(0, 0) scale(1)';
            });
        }

        // ============================================
        // 2. FORMULAIRE MULTI-√âTAPES
        // G√®re la navigation entre les 3 √©tapes du formulaire
        // ============================================
        let currentStep = 1;
        const totalSteps = 3;

        // Fonction pour passer √† l'√©tape suivante
        function nextStep(step) {
            if (step > currentStep && step <= totalSteps) {
                // Masquer l'√©tape actuelle
                document.getElementById(`step-${currentStep}`).classList.remove('active');
                
                // Afficher la nouvelle √©tape
                currentStep = step;
                document.getElementById(`step-${step}`).classList.add('active');
                
                // Mettre √† jour la barre de progression
                updateProgressBar(step);
                updateStepIndicators(step);
                
                // Scroll vers le haut du formulaire
                document.getElementById('devis').scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }

        // Fonction pour revenir √† l'√©tape pr√©c√©dente
        function prevStep(step) {
            if (step < currentStep && step >= 1) {
                // Masquer l'√©tape actuelle
                document.getElementById(`step-${currentStep}`).classList.remove('active');
                
                // Afficher l'√©tape pr√©c√©dente
                currentStep = step;
                document.getElementById(`step-${step}`).classList.add('active');
                
                // Mettre √† jour la barre de progression
                updateProgressBar(step);
                updateStepIndicators(step);
            }
        }

        // Mettre √† jour la barre de progression visuelle
        function updateProgressBar(step) {
            const progress = (step / totalSteps) * 100;
            document.getElementById('progress-fill').style.width = progress + '%';
        }

        // Mettre √† jour les indicateurs d'√©tapes (cercles num√©rot√©s) - Avec Orange
        function updateStepIndicators(step) {
            for (let i = 1; i <= totalSteps; i++) {
                const indicator = document.getElementById(`step-indicator-${i}`);
                if (i <= step) {
                    indicator.classList.remove('bg-gray-600');
                    indicator.classList.add('bg-orange', 'text-navy');
                } else {
                    indicator.classList.remove('bg-orange', 'text-navy');
                    indicator.classList.add('bg-gray-600', 'text-white');
                }
            }
        }

        // ============================================
        // 3. COMPTEURS ANIM√âS (Stats)
        // Animation de 0 √† la valeur cible quand on scrolle dessus
        // ============================================
        let countersAnimated = false;

        function animateCounter(element, target, suffix = '') {
            // Si le suffixe est 'H' et que l'√©l√©ment contient d√©j√† "48H", ne pas animer
            if (suffix === 'H' && element.textContent.includes('H')) {
                return; // Ne pas animer, garder "48H" tel quel
            }
            
            let current = 0;
            const increment = target / 50; // 50 frames pour l'animation
            const duration = 2000; // 2 secondes
            const stepTime = duration / 50;

            const timer = setInterval(() => {
                current += increment;
                if (current >= target) {
                    element.textContent = target + suffix;
                    clearInterval(timer);
                } else {
                    element.textContent = Math.floor(current) + suffix;
                }
            }, stepTime);
        }

        // Observer pour d√©clencher l'animation au scroll
        const statsObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting && !countersAnimated) {
                    countersAnimated = true;
                    
                    // Animer chaque compteur
                    const counter1 = document.getElementById('counter-1');
                    const counter2 = document.getElementById('counter-2');
                    const counter3 = document.getElementById('counter-3');
                    
                    animateCounter(counter1, 21, '+');
                    animateCounter(counter2, 850, '+');
                    animateCounter(counter3, 48, 'H');
                }
            });
        }, { threshold: 0.5 });

        // Observer la section des stats
        document.addEventListener('DOMContentLoaded', () => {
            const statsSection = document.getElementById('stats-section');
            if (statsSection) {
                statsObserver.observe(statsSection);
            }
        });

        // ============================================
        // 4. GESTION DU CHATBOT (Refonte - Ouverture automatique)
        // ============================================
        let chatAutoOpened = false;
        let chatTimer = null;

        // Fonction pour ouvrir le chat instantan√©ment (sans d√©lai)
        function openChat() {
            const chat = document.getElementById('chat-window');
            const welcomeMsg = document.getElementById('welcome-message');
            
            if (chat && chat.style.display !== 'flex') {
                chat.style.display = 'flex';
                
                // Afficher le message d'accroche avec un contraste parfait
                if (welcomeMsg) {
                    welcomeMsg.style.display = 'block';
                    welcomeMsg.style.opacity = '1';
                    // Scroll vers le message de bienvenue
                    setTimeout(() => {
                        welcomeMsg.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                    }, 100);
                }
                
                // Focus imm√©diat sur l'input
                const chatInput = document.getElementById('chat-input');
                if (chatInput) {
                    setTimeout(() => {
                        chatInput.focus();
                    }, 200);
                }
            }
        }

        // Fonction pour fermer le chat
        function closeChat() {
            const chat = document.getElementById('chat-window');
            if (chat) {
                chat.style.display = 'none';
            }
        }

        // Fonction toggle (pour le bouton manuel)
        function toggleChat() {
            const chat = document.getElementById('chat-window');
            // Masquer le badge quand on ouvre le chat
            const badge = document.getElementById('chat-notification-badge');
            if (badge) {
                badge.classList.add('hidden');
            }
            
            if (chat.style.display === 'flex' || chat.style.display === '') {
                closeChat();
            } else {
                openChat();
            }
        }

        // Fonction pour jouer un son discret (notification audio)
        function playNotificationSound() {
            try {
                // Cr√©er un contexte audio pour un son discret
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                // Son discret (fr√©quence douce, volume faible)
                oscillator.frequency.value = 800; // Fr√©quence douce
                oscillator.type = 'sine'; // Onde sinuso√Ødale (douce)
                
                gainNode.gain.setValueAtTime(0.1, audioContext.currentTime); // Volume tr√®s faible
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.2);
                
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.2);
            } catch (e) {
                // Si l'audio n'est pas disponible, on continue sans son
                console.log('Audio notification non disponible');
            }
        }

        // Fonction pour afficher une notification visuelle
        function showChatNotification() {
            const notification = document.createElement('div');
            notification.className = 'chat-notification';
            notification.innerHTML = '<i class="fas fa-comment-dots mr-2"></i> <span>Nouveau message disponible</span>';
            notification.style.cursor = 'pointer';
            notification.style.transition = 'all 0.3s ease';
            
            // Ouvrir le chat au clic sur la notification
            notification.addEventListener('click', () => {
                openChat();
                notification.remove();
            });
            
            // Effet hover
            notification.addEventListener('mouseenter', () => {
                notification.style.transform = 'scale(1.08)';
                notification.style.boxShadow = '0 12px 35px rgba(230, 155, 63, 0.6)';
            });
            notification.addEventListener('mouseleave', () => {
                notification.style.transform = 'scale(1)';
                notification.style.boxShadow = '0 8px 25px rgba(230, 155, 63, 0.5)';
            });
            
            document.body.appendChild(notification);
            
            // Supprimer la notification apr√®s 10 secondes
            setTimeout(() => {
                notification.style.opacity = '0';
                notification.style.transition = 'opacity 0.3s ease-out';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.remove();
                    }
                }, 300);
            }, 10000);
        }

        // Notification du chatbot apr√®s 1 minute
        document.addEventListener('DOMContentLoaded', function() {
            const closeBtn = document.getElementById('close-chat');
            if (closeBtn) {
                closeBtn.addEventListener('click', closeChat);
            }
            
            // D√©marrer le timer pour la notification du chatbot (30 secondes)
            // Le chatbot n'appara√Æt pas automatiquement, juste une notification
            chatTimer = setTimeout(() => {
                if (!chatAutoOpened) {
                    chatAutoOpened = true;
                    
                    // Jouer un son discret
                    playNotificationSound();
                    
                    // Afficher une notification visuelle (sans ouvrir le chat)
                    showChatNotification();
                    
                    // NE PAS ouvrir le chat automatiquement - l'utilisateur doit cliquer
                }
            }, 30000); // 30 secondes - laisse le temps de d√©couvrir les r√©alisations
            
            // Afficher le badge rouge sur le bouton apr√®s 1 minute
            setTimeout(() => {
                const badge = document.getElementById('chat-notification-badge');
                if (badge) {
                    badge.classList.remove('hidden');
                    badge.classList.add('animate-pulse');
                }
            }, 60000); // 1 minute
        });

        // ============================================
        // 5. LOGIQUE DE MISE √Ä JOUR DU FORMULAIRE
        // ============================================
        function updateFormLogic() {
            const type = document.getElementById('project-type').value;
            const dimsField = document.getElementById('dims-field');
            const messageTextarea = document.getElementById('dynamic-message');
            
            // Cacher le champ dimensions uniquement si Entretien/SAV
            if (type === 'entretien') {
                if (dimsField) dimsField.style.display = 'none';
            } else {
                if (dimsField) dimsField.style.display = 'block';
            }

            // Mise √† jour du placeholder selon le type de projet
            const placeholders = {
                'construction': 'Dites-nous en plus sur votre projet de nouvelle piscine (√©quipements, style...)',
                'renovation': 'D√©crivez votre projet de r√©novation (changement de liner, r√©novation de la structure, modernisation...)',
                'entretien': 'Pr√©cisez vos besoins en entretien (contrat annuel, intervention ponctuelle, type de piscine...)'
            };
            
            messageTextarea.placeholder = placeholders[type] || placeholders['construction'];
        }

        // Initialisation au chargement
        document.addEventListener('DOMContentLoaded', function() {
            updateFormLogic();
        });

        // ============================================
        // 6. VALIDATION ET SOUMISSION DU FORMULAIRE
        // ============================================
        function validateAndSubmit() {
            const form = document.getElementById('devis-form');
            let isValid = true;

            // Supprimer tous les messages d'erreur existants
            document.querySelectorAll('.error-message').forEach(msg => msg.remove());
            document.querySelectorAll('.error').forEach(field => field.classList.remove('error'));

            // Validation du nom complet
            const nomComplet = document.getElementById('nom-complet');
            if (!nomComplet.value.trim()) {
                showFieldError(nomComplet, '‚ö†Ô∏è Le nom complet est obligatoire');
                isValid = false;
            } else if (nomComplet.value.trim().length < 2) {
                showFieldError(nomComplet, '‚ö†Ô∏è Le nom doit contenir au moins 2 caract√®res');
                isValid = false;
            }

            // Validation de la ville/code postal
            const ville = document.getElementById('ville');
            if (!ville.value.trim()) {
                showFieldError(ville, '‚ö†Ô∏è La ville ou le code postal est obligatoire');
                isValid = false;
            } else if (ville.value.trim().length < 2) {
                showFieldError(ville, '‚ö†Ô∏è Veuillez entrer une ville valide (minimum 2 caract√®res)');
                isValid = false;
            }

            // Validation de l'email
            const email = document.getElementById('email');
            if (!email.value.trim()) {
                showFieldError(email, '‚ö†Ô∏è L\'adresse email est obligatoire');
                isValid = false;
            } else if (!isValidEmail(email.value)) {
                showFieldError(email, '‚ö†Ô∏è Format d\'email invalide (ex: nom@exemple.fr)');
                isValid = false;
            }

            // Validation du t√©l√©phone (facultatif mais doit √™tre valide si renseign√©)
            const telephone = document.getElementById('telephone');
            if (telephone.value.trim() && !isValidPhone(telephone.value)) {
                showFieldError(telephone, '‚ö†Ô∏è Format de t√©l√©phone invalide (ex: 06 12 34 56 78 ou 0612345678)');
                isValid = false;
            }

            // Validation des dimensions (si le champ est visible)
            const dimsField = document.getElementById('dims-field');
            const dimsInput = document.getElementById('dims-input');
            const projectType = document.getElementById('project-type').value;
            
            if (projectType !== 'entretien' && dimsField && dimsField.style.display !== 'none') {
                if (dimsInput.value.trim()) {
                    if (!isValidDimensions(dimsInput.value)) {
                        showFieldError(dimsInput, '‚ö†Ô∏è Format invalide. Utilisez: 8x4m, 8x4, 10x5m, etc.');
                        isValid = false;
                    }
                }
            }

            // Validation du message (facultatif mais recommand√©)
            const message = document.getElementById('dynamic-message');
            if (message.value.trim() && message.value.trim().length < 10) {
                showFieldError(message, '‚ö†Ô∏è Le message est trop court (minimum 10 caract√®res)');
                isValid = false;
            }

            if (isValid) {
                // R√©cup√©rer toutes les donn√©es du formulaire
                const formData = {
                    projectType: document.getElementById('project-type').value,
                    dimensions: document.getElementById('dims-input')?.value || 'Non renseign√©',
                    message: document.getElementById('dynamic-message').value,
                    name: document.getElementById('nom-complet').value.trim(),
                    phone: document.getElementById('telephone').value.trim() || 'Non renseign√©',
                    email: document.getElementById('email').value.trim(),
                    city: document.getElementById('ville').value.trim(),
                    file: document.getElementById('file-upload')?.files[0]?.name || 'Aucun fichier'
                };
                
                // Envoyer l'email automatiquement via EmailJS
                sendEmailAutomatic(formData);
            } else {
                // Scroll vers le premier champ en erreur
                const firstError = form.querySelector('.error');
                if (firstError) {
                    firstError.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    setTimeout(() => firstError.focus(), 300);
                }
            }
        }

        // Afficher un message d'erreur sous un champ
        function showFieldError(field, message) {
            field.classList.add('error');
            // Supprimer l'ancien message d'erreur s'il existe
            const existingError = field.parentElement.querySelector('.error-message');
            if (existingError) {
                existingError.remove();
            }
            const errorMsg = document.createElement('div');
            errorMsg.className = 'error-message';
            errorMsg.innerHTML = `<i class="fas fa-exclamation-circle"></i> ${message}`;
            field.parentElement.appendChild(errorMsg);
        }

        // Validation en temps r√©el pour am√©liorer l'UX
        document.addEventListener('DOMContentLoaded', function() {
            // Validation email en temps r√©el
            const emailField = document.getElementById('email');
            if (emailField) {
                emailField.addEventListener('blur', function() {
                    if (this.value.trim()) {
                        if (!isValidEmail(this.value)) {
                            showFieldError(this, '‚ö†Ô∏è Format d\'email invalide (ex: nom@exemple.fr)');
                        } else {
                            this.classList.remove('error');
                            const errorMsg = this.parentElement.querySelector('.error-message');
                            if (errorMsg) errorMsg.remove();
                        }
                    }
                });
            }

            // Validation t√©l√©phone en temps r√©el
            const phoneField = document.getElementById('telephone');
            if (phoneField) {
                phoneField.addEventListener('blur', function() {
                    if (this.value.trim() && !isValidPhone(this.value)) {
                        showFieldError(this, '‚ö†Ô∏è Format invalide (ex: 06 12 34 56 78 ou 0612345678)');
                    } else if (this.value.trim()) {
                        this.classList.remove('error');
                        const errorMsg = this.parentElement.querySelector('.error-message');
                        if (errorMsg) errorMsg.remove();
                    }
                });
            }

            // Validation dimensions en temps r√©el
            const dimsInput = document.getElementById('dims-input');
            if (dimsInput) {
                dimsInput.addEventListener('blur', function() {
                    const projectType = document.getElementById('project-type').value;
                    const dimsField = document.getElementById('dims-field');
                    
                    if (projectType !== 'entretien' && dimsField && dimsField.style.display !== 'none') {
                        if (this.value.trim() && !isValidDimensions(this.value)) {
                            showFieldError(this, '‚ö†Ô∏è Format invalide. Utilisez: 8x4m, 8x4, 10x5m, etc.');
                        } else if (this.value.trim()) {
                            this.classList.remove('error');
                            const errorMsg = this.parentElement.querySelector('.error-message');
                            if (errorMsg) errorMsg.remove();
                        }
                    }
                });
            }

            // Validation nom en temps r√©el
            const nomField = document.getElementById('nom-complet');
            if (nomField) {
                nomField.addEventListener('blur', function() {
                    if (this.value.trim() && this.value.trim().length < 2) {
                        showFieldError(this, '‚ö†Ô∏è Le nom doit contenir au moins 2 caract√®res');
                    } else if (this.value.trim()) {
                        this.classList.remove('error');
                        const errorMsg = this.parentElement.querySelector('.error-message');
                        if (errorMsg) errorMsg.remove();
                    }
                });
            }

            // Validation ville en temps r√©el
            const villeField = document.getElementById('ville');
            if (villeField) {
                villeField.addEventListener('blur', function() {
                    if (this.value.trim() && this.value.trim().length < 2) {
                        showFieldError(this, '‚ö†Ô∏è Veuillez entrer une ville valide (minimum 2 caract√®res)');
                    } else if (this.value.trim()) {
                        this.classList.remove('error');
                        const errorMsg = this.parentElement.querySelector('.error-message');
                        if (errorMsg) errorMsg.remove();
                    }
                });
            }

            // Validation message en temps r√©el
            const messageField = document.getElementById('dynamic-message');
            if (messageField) {
                messageField.addEventListener('blur', function() {
                    if (this.value.trim() && this.value.trim().length < 10) {
                        showFieldError(this, '‚ö†Ô∏è Le message est trop court (minimum 10 caract√®res)');
                    } else if (this.value.trim()) {
                        this.classList.remove('error');
                        const errorMsg = this.parentElement.querySelector('.error-message');
                        if (errorMsg) errorMsg.remove();
                    }
                });
            }
        });

        // Validation email
        function isValidEmail(email) {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailRegex.test(email);
        }

        // Validation t√©l√©phone fran√ßais
        function isValidPhone(phone) {
            // Accepte: 0612345678, 06 12 34 56 78, +33612345678, 0033612345678
            const phoneRegex = /^(?:(?:\+|00)33|0)[1-9](?:[.\s-]?[0-9]{2}){4}$/;
            const cleaned = phone.replace(/[\s.-]/g, '');
            return phoneRegex.test(cleaned) || /^0[1-9][0-9]{8}$/.test(cleaned);
        }

        // Validation dimensions (format: 8x4m, 8x4, 10x5m, etc.)
        function isValidDimensions(dimensions) {
            // Accepte: 8x4m, 8x4, 10x5m, 12.5x6m, etc.
            const dimsRegex = /^\d+([.,]\d+)?\s*[xX√ó]\s*\d+([.,]\d+)?\s*[mM]?$/;
            return dimsRegex.test(dimensions.trim());
        }

        // ============================================
        // ENVOI D'EMAIL AUTOMATIQUE VIA API
        // ============================================
        function sendEmailAutomatic(formData) {
            // Afficher un message de chargement
            const submitBtn = document.querySelector('button[type="submit"]');
            const originalText = submitBtn.innerHTML;
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i> Envoi en cours...';
            submitBtn.disabled = true;
            
            // Pr√©parer le contenu de l'email format√©
            const emailBody = `
Nouvelle demande de devis - Piscines du Rhin

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

TYPE DE PROJET: ${formData.projectType}
DIMENSIONS: ${formData.dimensions}

MESSAGE:
${formData.message}

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

COORDONN√âES:
‚Ä¢ Nom: ${formData.name}
‚Ä¢ T√©l√©phone: ${formData.phone}
‚Ä¢ Email: ${formData.email}
‚Ä¢ Ville: ${formData.city}
‚Ä¢ Fichier joint: ${formData.file}

Date: ${new Date().toLocaleString('fr-FR')}
            `;
            
            // Initialiser EmailJS avec votre Public Key
            emailjs.init("8telvjUX6HvdMtK5");
            
            // Pr√©parer les param√®tres pour EmailJS (toutes les variables n√©cessaires)
            const emailParams = {
                name: formData.name,
                email: formData.email,
                phone: formData.phone,
                city: formData.city,
                project_type: formData.projectType,
                dimensions: formData.dimensions,
                message: formData.message
            };
            
            // Envoyer l'email via EmailJS (envoi automatique direct)
            emailjs.send('service_fg3ra0l', 'template_sx46c1i', emailParams)
                .then(function(response) {
                    console.log('‚úÖ Email envoy√© avec succ√®s via EmailJS!', response.status, response.text);
                    showSuccessMessage();
                    resetForm();
                }, function(error) {
                    console.error('‚ùå Erreur EmailJS:', error);
                    showErrorMessage();
                });
        }
        
        // Fonction alternative avec EmailJS (si FormSubmit ne fonctionne pas)
        function tryEmailJS(formData) {
            if (typeof emailjs !== 'undefined') {
                try {
                    emailjs.init("YOUR_PUBLIC_KEY");
                    
                    const emailParams = {
                        to_email: 'contact@lespiscinesdurhin.fr',
                        from_name: formData.name,
                        from_email: formData.email,
                        subject: `Nouvelle demande de devis - ${formData.projectType}`,
                        message: `
Type de projet: ${formData.projectType}
Dimensions: ${formData.dimensions}
Message: ${formData.message}

Coordonn√©es:
- Nom: ${formData.name}
- T√©l√©phone: ${formData.phone}
- Email: ${formData.email}
- Ville: ${formData.city}
- Fichier joint: ${formData.file}

Date: ${new Date().toLocaleString('fr-FR')}
                        `,
                        phone: formData.phone,
                        city: formData.city
                    };
                    
                    emailjs.send('YOUR_SERVICE_ID', 'YOUR_TEMPLATE_ID', emailParams)
                        .then(function(response) {
                            console.log('Email envoy√© via EmailJS!', response.status);
                            showSuccessMessage();
                            resetForm();
                        }, function(error) {
                            console.error('Erreur EmailJS:', error);
                            showErrorMessage();
                        });
                } catch (e) {
                    console.error('EmailJS non configur√©:', e);
                    showErrorMessage();
                }
            } else {
                showErrorMessage();
            }
        }
        
        // Afficher le message de succ√®s
        function showSuccessMessage() {
            const submitBtn = document.querySelector('button[type="submit"]');
            submitBtn.innerHTML = '<i class="fas fa-check mr-2"></i>Email envoy√© !';
            submitBtn.classList.remove('bg-orange');
            submitBtn.classList.add('bg-green-500');
            
            // Animation de confettis
            createConfetti();
            
            setTimeout(() => {
                alert('‚úÖ Votre demande de devis a bien √©t√© envoy√©e √† contact@lespiscinesdurhin.fr\n\nNous vous r√©pondrons sous 48h.');
            }, 500);
        }
        
        // Cr√©er l'animation de confettis
        function createConfetti() {
            const confettiContainer = document.createElement('div');
            confettiContainer.className = 'confetti-container';
            document.body.appendChild(confettiContainer);
            
            const colors = ['orange', 'blue', 'turquoise'];
            const confettiCount = 50;
            
            for (let i = 0; i < confettiCount; i++) {
                const confetti = document.createElement('div');
                confetti.className = `confetti ${colors[Math.floor(Math.random() * colors.length)]}`;
                confetti.style.left = Math.random() * 100 + '%';
                confetti.style.animationDelay = Math.random() * 0.5 + 's';
                confetti.style.animationDuration = (Math.random() * 2 + 2) + 's';
                confettiContainer.appendChild(confetti);
            }
            
            // Supprimer les confettis apr√®s l'animation
            setTimeout(() => {
                confettiContainer.remove();
            }, 3000);
        }
        
        // Afficher un message d'erreur
        function showErrorMessage() {
            const submitBtn = document.querySelector('button[type="submit"]');
            const originalText = submitBtn.innerHTML;
            submitBtn.innerHTML = '<i class="fas fa-exclamation-triangle mr-2"></i>Erreur d\'envoi';
            submitBtn.classList.remove('bg-orange');
            submitBtn.classList.add('bg-red-500');
            
            alert('‚ö†Ô∏è Une erreur est survenue lors de l\'envoi. Veuillez r√©essayer ou nous contacter directement √† contact@lespiscinesdurhin.fr');
            
            setTimeout(() => {
                submitBtn.innerHTML = originalText;
                submitBtn.classList.remove('bg-red-500');
                submitBtn.classList.add('bg-orange');
                submitBtn.disabled = false;
            }, 3000);
        }
        
        // R√©initialiser le formulaire
        function resetForm() {
            const submitBtn = document.querySelector('button[type="submit"]');
            const originalText = submitBtn.innerHTML;
            
            // R√©initialiser le formulaire
            document.getElementById('devis-form').reset();
            updateFormLogic();
            currentStep = 1;
            document.querySelectorAll('.form-step').forEach(step => step.classList.remove('active'));
            document.getElementById('step-1').classList.add('active');
            updateProgressBar(1);
            updateStepIndicators(1);
            document.getElementById('step-indicator-1').classList.remove('bg-gray-600', 'text-white');
            document.getElementById('step-indicator-1').classList.add('bg-orange', 'text-navy');
            
            // Restaurer le bouton apr√®s 2 secondes
            setTimeout(() => {
                submitBtn.innerHTML = originalText;
                submitBtn.classList.remove('bg-green-500');
                submitBtn.classList.add('bg-orange');
                submitBtn.disabled = false;
            }, 2000);
        }

        // ============================================
        // 7. GESTION DU CHAT
        // ============================================
        function handleChatKeyPress(event) {
            if (event.key === 'Enter' && !event.shiftKey) {
                event.preventDefault();
                sendMsg();
            }
        }

        function sendMsg() {
            const input = document.getElementById('chat-input');
            const box = document.getElementById('chat-msgs');
            if(!input.value.trim()) return;

            // Message utilisateur
            const userMsg = document.createElement('div');
            userMsg.className = 'msg msg-user';
            userMsg.textContent = input.value;
            box.appendChild(userMsg);
            
            const userText = input.value.toLowerCase();
            input.value = "";
            box.scrollTop = box.scrollHeight;

            // Animation "Typing"
            const typingBlock = document.createElement('div');
            typingBlock.className = 'msg msg-ai';
            typingBlock.innerHTML = `
                <div class="typing-dots">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            `;
            box.appendChild(typingBlock);
            box.scrollTop = box.scrollHeight;

            setTimeout(() => {
                let r = "C'est not√©. Pour vous donner un devis pr√©cis sous 48h, le mieux est d'utiliser le formulaire de devis sur la page ou de me laisser votre num√©ro ici.";
                
                if(userText.includes("prix") || userText.includes("devis") || userText.includes("co√ªt")) {
                    r = "Un projet complet se situe autour de 20 000‚Ç¨ selon les options. Souhaitez-vous une √©tude d√©taill√©e ?";
                } else if(userText.includes("bas-rhin") || userText.includes("67")) {
                    r = "Nous intervenons rapidement dans tout le Bas-Rhin (67). Dites-moi votre besoin.";
                } else if(userText.includes("construction") || userText.includes("nouvelle")) {
                    r = "Pour une nouvelle piscine, nous cr√©ons des piscines sur mesure adapt√©es √† votre terrain. Quel style vous int√©resse ?";
                } else if(userText.includes("r√©novation") || userText.includes("renovation") || userText.includes("liner")) {
                    r = "Nous r√©alisons tous types de r√©novations : changement de liner, r√©paration de structure, modernisation. Quel est votre besoin ?";
                } else if(userText.includes("entretien") || userText.includes("maintenance")) {
                    r = "Nous proposons des contrats d'entretien annuels ou des interventions ponctuelles. Que pr√©f√©rez-vous ?";
                } else if(userText.includes("sav") || userText.includes("panne") || userText.includes("d√©pannage") || userText.includes("entretien")) {
                    r = "Pour un d√©pannage urgent ou un contrat d'entretien, appelez-nous au 07 61 32 91 84. Nous intervenons rapidement dans le Bas-Rhin (67).";
                }

                typingBlock.remove();
                
                const aiMsg = document.createElement('div');
                aiMsg.className = 'msg msg-ai';
                aiMsg.textContent = r;
                box.appendChild(aiMsg);
                
                box.scrollTop = box.scrollHeight;
            }, 1500);
        }

        // ============================================
        // 8. SOCIAL PROOF (FOMO - Notifications)
        // ============================================
        const events = [
            { city: "Strasbourg", project: "Nouvelle piscine", action: "Devis envoy√©" },
            { city: "Haguenau", project: "Diagnostic fuite", action: "Devis envoy√©" },
            { city: "Molsheim", project: "Entretien annuel", action: "Devis envoy√©" },
            { city: "Obernai", project: "Changement Liner", action: "Devis envoy√©" },
            { city: "Saverne", project: "R√©novation compl√®te", action: "Devis envoy√©" },
            { city: "S√©lestat", project: "Projet 8x4m", action: "Devis envoy√©" },
            { city: "Brumath", project: "Nouvelle piscine", action: "Devis envoy√©" },
            { city: "Geispolsheim", project: "Nouvelle piscine", action: "Devis envoy√©" }
        ];
        
        let activeNotifications = 0;
        let notificationInterval;
        
        document.addEventListener('DOMContentLoaded', function() {
            // Une notification toutes les 60 secondes (moins fr√©quent)
            notificationInterval = setInterval(() => {
                const container = document.getElementById('notif-container');
                if (!container) return;
                
                // Une seule notification √† la fois
                if (activeNotifications >= 1) return;
                
                // Utiliser des notifications plus anciennes/vari√©es
                const evt = events[Math.floor(Math.random() * events.length)];
                
                const div = document.createElement('div');
                div.className = "social-proof bg-navy/95 backdrop-blur-md flex items-center gap-3 p-4 rounded-2xl shadow-2xl border border-orange/30";
                
                div.innerHTML = `
                    <div class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div>
                    <div>
                        <p class="text-[10px] font-black uppercase tracking-widest text-white">${evt.action} √† ${evt.city}</p>
                        <p class="text-[9px] text-gray-400 mt-0.5">${evt.project}</p>
                    </div>
                `;
                container.appendChild(div);
                activeNotifications++;
                
                setTimeout(() => {
                    div.style.opacity = '0';
                    div.style.transition = 'opacity 0.4s ease-out, transform 0.4s ease-out';
                    div.style.transform = 'translateX(100%)';
                    setTimeout(() => {
                        if (div.parentNode) {
                            div.remove();
                            activeNotifications--;
                        }
                    }, 400);
                }, 4000);
            }, 60000); // 60 secondes entre chaque notification (moins fr√©quent)
        });

        // Nettoyage au d√©chargement
        window.addEventListener('beforeunload', () => {
            if (notificationInterval) {
                clearInterval(notificationInterval);
            }
            if (chatTimer) {
                clearTimeout(chatTimer);
            }
        });
    </script>
</body>
</html>